<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" 
               "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<chapter id="tutorial-querying-functionality">
<title>Listing built-in functionality</title>

<para>
Raptor can be configured and compiled with support for different
parsers and serializers.  Lists of the functionality built into the
library can be interrogated by means of
<emphasis>enumerate</emphasis> functions.  These take as input an
<literal>int</literal> counter and return descriptions of the feature
at that offset in the list.  The descriptions are returned stored in
the variables pointed to by the reference arguments of the
<literal>**</literal><emphasis>var</emphasis> form.
The return value of the function is non-zero when the counter has
gone too far.
</para>

<variablelist>
<title>Listing Functionality with Descriptions</title>
<varlistentry><term>Get descriptons of the parser syntaxes</term>
<listitem><programlisting>
  const raptor_syntax_description*
  raptor_world_get_parser_description(raptor_world* world,
                                      unsigned int counter);
</programlisting></listitem>
</varlistentry>
<varlistentry><term>Get descriptions of the serializer syntaxes</term>
<listitem><programlisting>
  const raptor_syntax_description*
  raptor_world_get_serializer_description(raptor_world* world,
                                          unsigned int counter);
</programlisting></listitem>
</varlistentry>
<varlistentry><term>Get descriptions of options</term>
<listitem><programlisting>
  raptor_option_description*
  raptor_world_get_option_description(raptor_world* world,
                                      const raptor_domain domain,
                                      const raptor_option option);
</programlisting>
<para>
Call with the appropriate domains for the class such as
<link linkend="RAPTOR-DOMAIN-PARSER:CAPS"><literal>RAPTOR_DOMAIN_PARSER</literal></link>,
<link linkend="RAPTOR-DOMAIN-SERIALIZER:CAPS"><literal>RAPTOR_DOMAIN_SERIALIZER</literal></link>
 etc.
</para>
</listitem>
</varlistentry>
</variablelist>

<para>These functions can be called directly after creating a
raptor world object with
<link linkend="raptor-new-world"><function>raptor_new_world()</function></link>.
This is one way to find a parser (name) by it's MIME Type, the other
is to use the mime_type parameter of the
<link linkend="raptor-new-parser-for-content"><function>raptor_new_parser_for_content()</function></link>.</para>

<example id="raptor-example-list-all-parser-options">
<title>List all options of parsers using descriptions</title>
<programlisting>
  unsigned int i;
  for(i = 0; i &lt; RAPTOR_FEATURE_LAST; i++) {
    const raptor_syntax_description*
    sd = raptor_world_get_parser_description(world, i);

    if(!sd)
      continue;
    /* do something with sd fields such as sd->names, sd->label */
  }
</programlisting>
<para>There are more examples of this usage in the source for the
<literal>rapper</literal> utility in <filename>util/rapper.c</filename>.
</para>
</example>

</chapter>

<!--
Local variables:
mode: sgml
sgml-parent-document: ("raptor-docs.xml" "book" "part")
End:
-->
