2007-06-04  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: (raptor_grddl_add_transform_uri): Added, to
	add a transformation URI
	(XSLT) for a document, removing duplicate URIs.
	(raptor_grddl_filter_triples, raptor_grddl_parse_chunk): Use
	raptor_grddl_add_transform_uri.

2007-06-03  Dave Beckett  <dave@dajobe.org>

	* configure.ac, src/raptor_grddl.c, src/raptor_internal.h,
	src/raptor_parse.c: Add RDFa parser

2007-05-27  Dave Beckett  <dave@dajobe.org>

	* src/raptor_serialize.c: (raptor_serializer_register_factory):
	Fix debug call with RAPTOR_DEBUG>1
	Fixes Issue#0000195 http://bugs.librdf.org/mantis/view.php?id=195

2007-05-26  Dave Beckett  <dave@dajobe.org>

	* src/raptor_uri.c: (raptor_uri_filename_to_uri_string): Make
	path_max bigger *2, not smaller /4.
	Fixes Issue#0000192 http://bugs.librdf.org/mantis/view.php?id=192

	* src/n3_parser.y: (n3_parser_error): Invoke
	raptor_parser_simple_error with a format string and arg.

	* src/turtle_parser.y: (turtle_parser_error): Invoke
	raptor_parser_simple_error with a format string and arg.

	* src/raptor.h: Allow _declspec and __declspec
	Fixes Issue#0000188 http://bugs.librdf.org/mantis/view.php?id=188

2007-05-23  Dave Beckett  <dave@dajobe.org>

	* docs/tmpl/section-feature.sgml: Add RAPTOR_FEATURE_HTML_TAG_SOUP

2007-05-21  Dave Beckett  <dave@dajobe.org>

	* configure.ac: Check for libxml/nanohttp.h only once the
	xml-config include paths have been setup.

	* configure.ac: Add -Wformat-security

2007-05-14  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: (raptor_grddl_parse_chunk): Use
	HTML_PARSE_RECOVER if available

	* src/raptor.h, src/raptor_feature.c, src/raptor_grddl.c,
	src/raptor_parse.c, src/raptor_sax2.c, src/raptor_serialize.c,
	src/raptor_turtle_writer.c, src/raptor_xml_writer.c: Added parser
	feature RAPTOR_FEATURE_HTML_TAG_SOUP aka htmlTagSoup for use by
	GRDDL parser

	* src/raptor_libxml.c: debug bogus pointers not fail temporarily

	* src/raptor_rdfxml.c: (raptor_rdfxml_parse_recognise_syntax):
	Move buffer editing to raptor_guess_parser_name.

	* src/raptor_parse.c: (raptor_guess_parser_name): Only run
	recognise_syntax with first N bytes of content

	* src/raptor_grddl.c: debugmsg

	* src/raptor_grddl.c: Use HTML parser when XML parser fails, to
	create a DOM for GRDDLing from invalid/not-WF HTML content.
	raptor_grddl_parser_context_s gains htmlParserCtxt as well as
	xmlParserCtxt and process_this_as_rdfxml GRDDL flag to know when
	to parse the content twice.
	(raptor_grddl_parse_terminate): Tidy htmlParserCtxt.  Add
	MATCH_IS_HARDCODED to match_table just to make it clear.
	(match_table): Re-enable hcalendar and hcard as hardcoded XSLTs
	(raptor_grddl_run_xpath_match): Handle non-namespace elements.
	Handle MATCH_IS_HARDCODED and return on first match.
	(raptor_grddl_parse_chunk): Major change in structure - all
	content passed in is saved until is_end=1, then parsed with XML
	parser and if that fails, HTML parser.  HTML parser is run with no
	errors or warnings.

2007-05-11  Dave Beckett  <dave@dajobe.org>

	* src/turtle_parser.y: (raptor_turtle_parse_recognise_syntax):
	Look for turtle @prefix and rdf namespace use in buffer.

	* src/n3_lexer.l: Add rule to allow a comment on the last line,
	without a final newline

	* src/turtle_lexer.l: Add rule to allow a comment on the last
	line, without a final newline

	* tests/turtle/Makefile.am, tests/turtle/test-26.out,
	tests/turtle/test-26.ttl: Add test-26

2007-05-10  Dave Beckett  <dave@dajobe.org>

	* src/raptor_rdfxml.c: 's

2007-05-09  Dave Beckett  <dave@dajobe.org>

	* src/raptor_rdfxml.c: (raptor_rdfxml_parse_recognise_syntax):
	Recognize rdf entities as namespaces.  Add bonus points for using
	the words rdf and rdf

2007-05-08  Dave Beckett  <dave@dajobe.org>

	* src/raptor_rdfxml.c: (raptor_rdfxml_parse_recognise_syntax):
	Only use first 512 bytes of content for hunting for namespaces.

2007-04-26  Dave Beckett  <dave@dajobe.org>

	* src/raptor_internal.h: struct raptor_www_s loses useless
	old_handler field for www_libxml

	* src/raptor_www_libxml.c: (raptor_www_libxml_init,
	raptor_www_libxml_free): Set, reset generic error func.

	* src/raptor_internal.h: Fix raptor_parse_date prototype

	* src/raptor_libxml.c: (raptor_libxml_init_generic_error_handlers):
	Use xmlSetGenericErrorFunc

	* src/parsedate.y: ANSI C function prototypes.

	* src/parsedate.y: Prototype for raptor_parse_date

2007-04-24  Dave Beckett  <dave@dajobe.org>

	* src/raptor_general.c: raptor_log_level_labels make it the right size

	* src/raptor_grddl.c, src/raptor_parse.c, src/raptor_sax2.c:
	Update for error_handlers arrays.

	* src/raptor_libxml.c: (raptor_libxml_warning): Update for
	error_handlers arrays.  Also do not send an error to the warning
	handlers.
	(raptor_libxml_error_common, raptor_libxml_validation_warning):
	Update for error_handlers arrays.
	(raptor_libxml_xmlStructuredErrorFunc): Add xpath to the error
	message when the domain is XML_FROM_XPATH.  Ignore error_handlers
	if the pointer is bogus.  Use the arrays.  If error_handler is
	NULL, ignore it.

	* src/raptor_general.c: (raptor_error_handlers_init): Init error
	handler array fields and magic field.

	* src/raptor_internal.h: raptor_error_handlers now contains arrays
	of user_data and handlers and a magic field to check that an
	error_handler pointer is valid.

2007-04-22  Dave Beckett  <dave@dajobe.org>

	* autogen.sh: Update autogen.sh

2007-04-14  Dave Beckett  <dave@dajobe.org>

	* src/raptor_serialize_turtle.c: (raptor_turtle_emit_literal,
	raptor_turtle_emit_xml_literal): Send namespace stack to
	raptor_turtle_writer_literal

	* src/raptor_turtle_writer.c: (raptor_turtle_writer_literal): Add
	nspace field and use it to look up if a qname can be used for a
	datatype URI.

	* src/raptor_internal.h: raptor_turtle_writer_literal gains nspace
	field

	* src/raptor_parse.c: (raptor_guess_parser_name): Make suffix
	decoding work again

2007-04-10  Dave Beckett  <dave@dajobe.org>

	* src/raptor_rss.c: (raptor_rss_parse_recognise_syntax): One more
	addition in the neverending guesswork that is rss tag soup.  This
	time for sites that have feed in the DNS name, or just somewhere
	in the URL.

	* src/raptor_parse.c: (raptor_guess_parser_name): Discard suffixes
	that are not '\.[a-zA-Z0-9]+$'

2007-03-27  Dave Beckett  <dave@dajobe.org>

	* configure.ac: Check for curl header after inserting any cflags
	from curl-config.  This lets the curl test work when curl the
	includes are not in the usual places

2007-03-26  Dave Beckett  <dave@dajobe.org>

	* configure.ac, src/win32_raptor_config.h: Bumped version to
	1.4.16

	* Snapshotted raptor_1_4_15 for 1.4.15 release (SVN r12027)

	* src/raptor_grddl.c: (raptor_grddl_parser_register_factory):
	Register XHTML mime type higher, very unlikely another parser is
	dealing with this.

	* src/raptor_rss.c: (raptor_rss_parse_recognise_syntax): Make mime
	type heuristics ignore anything with html in it so XHTML mime type
	is ignored.

2007-03-25  Dave Beckett  <dave@dajobe.org>

	* src/raptor_internal.h: raptor_uri_detail_s gains is_hierarchical
	flag.
	
	* src/raptor_rfc2396.c: (raptor_new_uri_detail): Set
	is_hierarchical flag.
	(raptor_uri_resolve_uri_reference): Handle a non-hierarchical base
	URI.
	Fixes Issue#0000177 http://bugs.librdf.org/mantis/view.php?id=177
	(main): Fix above changes an earlier test:
	From:
	  resolve("foo:", "not_scheme:blah") => "foo:/not_scheme:blah"
	To:
	  resolve("foo:", "not_scheme:blah") => "foo:not_scheme:blah"

	* src/raptor_rfc2396.c: (main): Add test to confirm report from
	Issue#000177 http://bugs.librdf.org/mantis/view.php?id=177

	* utils/rapper.c: Print all informational and help messages to
	stderr.  Only results of parsing and the help (-h/--help) message
	goes to stdout now.

2007-03-22  Dave Beckett  <dave@dajobe.org>

	* src/raptor_xml_writer.c, src/ntriples_parse.c,
	src/raptor_grddl.c, src/raptor_parse.c: Casts for C++

	* examples/grapper.c: Use library variables for license, home page

	* examples/grapper.c: Casts and C99 fixes

	* src/raptor_rss.h: Fix CONTENT_NAMESPACE_URI to correct URI

2007-03-19  Dave Beckett  <dave@dajobe.org>

	* utils/rapper.c: NULL base URI

	* tests/Makefile.am: Set rapper output baseuri to NULL via '-'

	* utils/rapper.1, utils/rapper.c: Allow base uri '-' for no output
	base URI

	* src/raptor_www.c: (raptor_www_fetch): If a request returns a
	status code that is not success, generate an error message.

	* src/raptor_www_curl.c: (raptor_www_curl_fetch): Enhance failure
	error message

2007-03-15  Dave Beckett  <dave@dajobe.org>

	* src/raptor_serialize_rss.c: Adjust the xml:base attribute adding
	to put it next to the raptor_xml_writer_start_element of the root
	element.

	* src/raptor_serialize_rdfxmla.c:
	raptor_rdfxmla_serializer_context gains xml_nspace field.
	(raptor_rdfxmla_serialize_init,
	raptor_rdfxmla_serialize_terminate): Init/free xml namespace.
	(raptor_rdfxmla_ensure_writen_header): Write xml:base when a base
	URI is given.
	Addresses Issue #0000174 http://bugs.librdf.org/mantis/view.php?id=174

	* src/raptor_serialize_rdfxml.c: raptor_rdfxml_serializer_context
	gains xml_nspace field.
	(raptor_rdfxml_serialize_init, raptor_rdfxml_serialize_terminate):
	Init/free xml namespace.
	(raptor_rdfxml_ensure_writen_header): Write xml:base when a base
	URI is given.
	Addresses Issue #0000174 http://bugs.librdf.org/mantis/view.php?id=174

2007-03-12  Dave Beckett  <dave@dajobe.org>

	* src/raptor_rss.c, src/raptor_serialize_rss.c: Replace shared
	nspaces list with one per rss-parser/serializer.

	* src/raptor_rss.h: raptor_rss_namespace_info looses nspace field.

	* src/raptor_rfc2396.c: (raptor_uri_resolve_uri_reference): In
	removing ./ do not go past end of buffer.

2007-03-11  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: struct raptor_grddl_parser_context_s gains
	content_type, content_type_check and stringbuffer for saved
	rdf/xml content.
	(raptor_grddl_parse_terminate): Free any saved content type or
	stringbuffer.
	(raptor_grddl_parse_start): Init type check.
	(raptor_grddl_libxml_discard_error): Restore, for discarding
	validation errors again.
	(raptor_grddl_parse_chunk): If content type was seen and type was
	application/rdf+xml, save content for later parsing as RDF/XML.
	Discard validation errors again.
	(raptor_grddl_parse_content_type_handler): Save content type
	header when passed in.
	(raptor_grddl_parser_register_factory): Register
	raptor_grddl_parse_content_type_handler.

	* src/raptor_parse.c: (raptor_guess_parser_name): Add any mime
	type q <10 to the score, don't lose it entirely.

2007-03-02  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: Alter match_table to look for substrings
	inside html:link@rel and html:a@rel Delete old hard-coded
	transforms for dc: never worked and embedded RDF: grddl profile
	support handles this now.

	* src/raptor_grddl.c: (raptor_grddl_run_grddl_transform_doc):
	Invoke xsltSetGenericErrorFunc here to get the right rdf_parser
	configured.

	* src/raptor_grddl.c: Handles GRDDL W3C Working Draft 2 March 2007

	* src/raptor_grddl.c: (raptor_grddl_libxml_discard_error): Deleted.
	(raptor_grddl_parse_chunk): No longer ignore validation errors
	http://lists.w3.org/Archives/Public/public-grddl-comments/2007JanMar/0062.html

2007-02-15  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: (raptor_grddl_run_grddl_transform_uri):
	Return a warning and do not fail if XSLT sheet is not found
	(raptor_grddl_run_recursive): Return a warning and do not fail if
	the recursive GRDDL doc is not found.
	(raptor_grddl_parse_chunk): Tidy other errors.  Add aborting on
	XInclude failure.

	* src/raptor_grddl.c: (raptor_grddl_parse_chunk): Do not get/set
	content when there was no internal parser.

	* src/raptor_grddl.c: (raptor_grddl_ensure_internal_parser): Unset
	user_data/statement_handler if filter is not used so that re-using
	the same parser with different filter now works.
	(raptor_grddl_fetch_uri): Add content_type_handler and
	content_type_user_data args and use them to call
	raptor_www_set_content_type_handler if not NULL.
	(raptor_grddl_run_grddl_transform_uri): Update
	raptor_grddl_fetch_uri call
	(raptor_grddl_check_rdf_content_type_handler): Handler to look for
	RDF MIME Type and trigger content saving if so.
	(raptor_grddl_run_recursive): Add allow_rdf argument to allow
	RDF/XML content to be processed if the type is right.
	(raptor_grddl_parse_chunk): For a namespace URI, run recursive and
	allow RDF/XML.  If it was seen on return, create a new "rdfxml"
	parser and run it.  Reorder setting the root_ns_uri profile
	earlier so that it can be recognised as a transform in RDF/XML
	namespace documents.

	* src/raptor_parse.c: (raptor_parse_chunk): If the stringbuffer is
	declared, save a copy of the bytes that pass by.
	(raptor_parser_save_content, raptor_parser_get_content): Added to
	trigger/reset saving content and to get the content back as a new
	string.

	* src/raptor_internal.h: raptor_parser gains a stringbuffer Added
	prototypes for raptor_parser_save_content and
	raptor_parser_get_content

2007-02-12  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: (raptor_grddl_parse_init): Update
	raptor_new_sax2 call. Delete raptor_sax2_set_locator.

	* src/raptor_rss.c: (raptor_rss_parse_init): Update
	raptor_new_sax2 call. Delete raptor_sax2_set_locator.

	* src/raptor_rdfxml.c: (raptor_rdfxml_parse_init): Update
	raptor_new_sax2 call. Delete raptor_sax2_set_locator.

	* src/raptor_www.c: (raptor_www_error_varargs): Call
	raptor_log_error_varargs.

	* src/raptor_parse.c: (raptor_new_parser): Set locator and
	handlers/data in the error_handlers.
	(raptor_parser_fatal_error): Call raptor_log_error_varargs
	(raptor_parser_fatal_error_varargs): Removed.
	(raptor_parser_fatal_error_message_handler): call
	raptor_log_error.
	(raptor_parser_simple_error, raptor_parser_error_varargs,
	raptor_parser_warning): Call raptor_log_error_varargs.
	(raptor_parser_error_message_handler,
	raptor_parser_warning_message_handler): Call raptor_log_error.
	(raptor_set_fatal_error_handler, raptor_set_error_handler,
	raptor_set_warning_handler): Update for error_handlers
	(raptor_parser_copy_user_state): Copy raptor_error_handlers block.

	* src/raptor_sax2.c: (raptor_new_sax2): Just have error_handlers
	arg.  Use xmlSetStructuredErrorFunc for better libxml errors
	(raptor_sax2_set_locator): Removed, not needed.
	(raptor_sax2_simple_error): Call raptor_log_error_varargs.
	(raptor_sax2_parse_start): Call xmlSetStructuredErrorFunc
	(raptor_sax2_parse_chunk): Call raptor_log_error_simple instead of
	directly calling the error handler.

	* src/raptor_libxml.c: (raptor_libxml_call_handler): Removed.
	(raptor_libxml_warning, raptor_libxml_error_common,
	raptor_libxml_validation_warning): Use raptor_log_error_varargs.
	(raptor_libxml_xmlStructuredErrorFunc): Use locator from the
	error_handlers.  Call raptor_log_error.

	* src/raptor_general.c: (raptor_invoke_simple_message_varargs,
	raptor_invoke_message_varargs): Removed internal function.  Added
	raptor_log_level_labels list.
	(raptor_log_error_simple, raptor_log_error_varargs,
	raptor_log_error): Added for new logging.
	(raptor_error_handlers_init): Added to init new structure

	* src/raptor_internal.h: Added raptor_error_handlers structure and
	remove the pointers from raptor_parser, raptor_sax2.  Added
	raptor_log_level enum Removed raptor_invoke_message_varargs,
	raptor_invoke_simple_message_varargs Added
	raptor_error_handlers_init, void raptor_log_error_simple, void
	raptor_log_error_varargs, void raptor_log_error raptor_new_sax2
	now just takes a raptor_error_handler* param
	Removed raptor_sax2_set_locator

	* utils/rapper.c: help text for -t/--trace

2007-02-11  Dave Beckett  <dave@dajobe.org>

	* src/raptor_libxml.c: #if LIBXML_VERSION >= not >

	* utils/rapper.1: Added -t/--trace option to show URIs traversed.

	* utils/rapper.c: Added -t/--trace option to show URIs traversed.
	(rapper_uri_trace): Added.
	(main): If tracing, register rapper_uri_trace as a URI filter
	function with raptor_parser_set_uri to see URis retrieved.

	* src/raptor_grddl.c: (raptor_grddl_parse_chunk): Call
	xmlSetStructuredErrorFunc to make most errors be printed much nicer.

	* src/raptor_internal.h: Added
	raptor_libxml_xmlStructuredErrorFunc prototype.

	* src/raptor_libxml.c: (raptor_libxml_xmlStructuredErrorFunc):
	Added for sending libxml structured error messages back to a
	parser.

2007-02-10  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: Add XInclude headers
	(raptor_grddl_filter_triples): Renamed from
	raptor_grddl_relay_triples
	(raptor_grddl_filter_triples): Do not pass on triples, just look
	for transformation triples.
	(raptor_grddl_ensure_internal_parser): Add filter arg and if set
	for profile and namespace parsings, send triples via
	raptor_grddl_filter_triples.
	(raptor_grddl_run_grddl_transform_doc): Call
	raptor_grddl_ensure_internal_parser with no filtering when have
	got the resulting string and want to do a specific parse, not a
	recursive GRDDL.
	(raptor_grddl_run_recursive): Call
	raptor_grddl_ensure_internal_parser filtering when doing a
	recursive GRDDL - this is namespace or profile recursion.
	(raptor_grddl_parse_chunk): Run XML include processing.  Do not
	try to call NULL profile URIs.  Fix transformation loop to call
	all transformations, not just first.

	* src/raptor_grddl.c: (raptor_grddl_libxml_discard_error): Added
	to throw away libxml errors.
	(raptor_grddl_parse_chunk): Use raptor_grddl_libxml_discard_error
	to dicard XML validation errors since it seems the GRDDL spec
	doesn't care.

	* src/turtle_parser.y: (raptor_turtle_parse_recognise_syntax):
	Recognise n3 in mime type when N3 parser is not around.
	(raptor_turtle_parser_register_factory): Register low interest in
	text/rdf+n3 when N3 parser is not around.

2007-02-06  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: (raptor_grddl_parse_chunk): Tidy up doc and
	xpath context on errors or success so that it is initialised next
	time for new documents.

	* src/raptor_grddl.c: (raptor_grddl_parser_add_parent): Do not set
	parent twice

2007-01-31  Dave Beckett  <dave@dajobe.org>

	* configure.ac, src/win32_raptor_config.h: Bumped version to
	1.4.15

	* Snapshotted raptor_1_4_14 for 1.4.14 release (SVN r11863)

2007-01-28  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: (raptor_libxslt_error_common): Added.
	(raptor_grddl_xsltGenericError_handler): Added.
	(raptor_grddl_parse_init): Register
	raptor_grddl_xsltGenericError_handler to handle XSLT generic
	errors.
	(raptor_grddl_run_grddl_transform_doc): Set 'base' and 'Base' XSLT
	parameters to allow some XSLT sheets to work - pragmatism.

	* src/raptor_grddl.c: struct raptor_grddl_parser_context_s gains
	rdf_parser field.  Add lots more debugging messages
	(raptor_grddl_parse_init): Init rdf_parser field.
	(raptor_grddl_parser_add_parent): Relay all triples to the parent
	grddl parser.
	(raptor_grddl_ensure_internal_parser): Lose relay flag - always
	relay.
	(raptor_grddl_parse_chunk): Copy root_ns_uri if not NULL.  When
	processing head profile URIs, strip out the GRDDL profile URI
	before adding them to the grddl_parser->profile_uris sequence.

2007-01-27  Dave Beckett  <dave@dajobe.org>

	* configure.ac: Add AC_CHECK_FUNC(xsltInit)

	* src/raptor_grddl.c: (raptor_init_parser_grddl): Check for xsltInit

	* src/raptor_parse.c: (raptor_parsers_finish): Call
	raptor_terminate_parser_grddl when enabled.

	* src/raptor_internal.h: Added raptor_terminate_parser_grddl prototype

	* src/raptor_grddl.c: Add XML schema namespace to ignored
	namespace list.
	(raptor_grddl_parse_chunk): Copy root namespace URI when adding to
	a list.
	(raptor_terminate_parser_grddl): Added, to free up shared
	resources.

	* docs/libraptor.3: 1.4.14

	* src/raptor_parse.c: autodocs

	* src/raptor_internal.h: Move raptor_turtle_writer to
	raptor_internal.h for now.

	* src/raptor.h: Move raptor_turtle_writer to raptor_internal.h for
	now.

2007-01-26  Dave Beckett  <dave@dajobe.org>

	* src/n3_parser.y, src/ntriples_parse.c, src/raptor_general.c,
	src/raptor_rdfxml.c, src/raptor_rss.c, src/turtle_parser.y: Rename
	raptor_generate_id to raptor_parser_internal_generate_id with
	altered calling convention - pass in ID type

	* src/raptor.h: Adedd prototype for raptor_parser_generate_id

	* src/raptor_internal.h: raptor_parser_internal_generate_id
	renamed from raptor_generate_id.

	* src/raptor_parse.c: (raptor_parser_generate_id): Added as a
	public function, modified from previously internal
	raptor_generate_id().
	(raptor_parser_internal_generate_id): Renamed from
	raptor_generate_id.

2007-01-16  Dave Beckett  <dave@dajobe.org>

	* utils/rapper.c: Add a another raptor_finish() before exit

2007-01-14  Dave Beckett  <dave@dajobe.org>

	* src/raptor_grddl.c: struct raptor_grddl_parser_context_s loses
	xpathObj
	(raptor_grddl_parse_terminate): Remove xpathObj tidy.  Remove
	profile URIs from 'match_table' list of xpaths - now invoked on
	it's own.
	(raptor_grddl_relay_triples): Add relay triples debugging.  Fix
	loop to properly walk through profile URIs
	(raptor_grddl_run_xpath_match): Added to invoke a match to an
	xpath returning a list of URIs as raptor_sequence.  Code removed
	from raptor_grddl_parse_chunk.
	(raptor_grddl_run_recursive): Added to invoke a recursive GRDDL on
	a URI, sending triples back to the current parser.  Code removed
	from raptor_grddl_parse_chunk.
	(raptor_grddl_parse_chunk): Use raptor_grddl_run_recursive to do
	most of the work.  Invoke the <head profile> early on before
	running general XPath matches.  Use raptor_grddl_run_xpath_match
	to run general XPath matches.

	* utils/rapper.c: Use raptor_home_url_string and
	raptor_license_string in short and long usage messages.

	* src/raptor.h: Added raptor_home_url_string (replacing raptor_url)

	* src/raptor_general.c: raptor_home_url_string

	* src/raptor.h: Added raptor_url

	* src/raptor.h: Added raptor_license_string

	* src/raptor_general.c: 2007 and add raptor_license_string

2007-01-07  Dave Beckett  <dave@dajobe.org>

	* src/raptor_abbrev.c: (raptor_new_abbrev_node): Initialise with
	ref_count 1
	(raptor_abbrev_node_lookup): Do not add ref_count here

	* tests/turtle/Makefile.am: (check-turtle-serialize): rdfdiff with
	a local file, not one in $(srcdir)

	* utils/rdfdiff.c: Apply the base URI to the to-file, if given.
	Otherwise use the from_file's URI.

	* tests/turtle/Makefile.am: (check-turtle-serialize): Add base
	URIs for the rdf-schema.ttl and rdfs-namespace.ttl

	* tests/turtle/Makefile.am: (check-turtle-serialize): Ensure it
	dies when a failure happens

	* tests/turtle/Makefile.am: (check-turtle-serialize): Call rdfdiff
	with -u to set base URI for input turtle.  This allows test-00.ttl
	to produce the same absolute URIs each time and for round-trip
	serializing to work.

	* utils/rdfdiff.c: Added -u/--base-uri option to specify the from
	file base URI so that if the from file is a local file or relative
	URI, it can be given an absolute base.

	* tests/turtle/Makefile.am: (check-turtle-serialize): output
	serialization results to .ttl files

	* tests/turtle/Makefile.am: Add check-turtle-serialize to
	check-local

2007-01-05  Dave Beckett  <dave@dajobe.org>

	* src/raptor-config.1: Document --private-libs and explain what it
	is under --libs too.

	* src/raptor-config.in: Add --private-libs and move private @LIBS
	to that from --libs

	* raptor.pc.in: Use Libs.private for internal dynamically linked
	libraries
